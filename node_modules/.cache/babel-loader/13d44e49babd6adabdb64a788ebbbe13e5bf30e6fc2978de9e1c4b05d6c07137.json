{"ast":null,"code":"import _slicedToArray from\"/Users/hwak/Documents/workspace/playground/bite/emotion-diary/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/hwak/Documents/workspace/playground/bite/emotion-diary/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/hwak/Documents/workspace/playground/bite/emotion-diary/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useReducer,useRef,useEffect}from\"react\";import\"./App.css\";import{BrowserRouter,Routes,Route}from\"react-router-dom\";import Home from\"./pages/Home\";import New from\"./pages/New\";import Edit from\"./pages/Edit\";import Diary from\"./pages/Diary\";import{type}from\"@testing-library/user-event/dist/type\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(state,action){var newState=[];switch(action.type){case'INIT':{return action.data;}case'CREATE':{newState=[action.data].concat(_toConsumableArray(state));break;}case'REMOVE':{newState=state.filter(function(it){return it.id!==action.targetId;});break;}case'EDIT':{newState=state.map(function(it){return it.id===action.data.id?_objectSpread({},action.data):it;});break;}default:return state;}localStorage.setItem('diary',JSON.stringify(newState));return newState;};export var DiaryStateContext=/*#__PURE__*/React.createContext();export var DiaryDispatchContext=/*#__PURE__*/React.createContext();function App(){var _useReducer=useReducer(reducer,[]),_useReducer2=_slicedToArray(_useReducer,2),data=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){var localData=localStorage.getItem('diary');if(localData){var diaryList=JSON.parse(localData).sort(function(a,b){return parseInt(b.id)-parseInt(a.id);});if(diaryList.length>=1){dataId.current=parseInt(diaryList[0].id)+1;dispatch({type:\"INIT\",data:diaryList});}}},[]);var dataId=useRef(6);// CREATE\nvar onCreate=function onCreate(date,content,emotion){dispatch({type:\"CREATE\",data:{id:dataId.current,date:new Date(date).getTime(),content:content,emotion:emotion}});dataId.current+=1;};// REMOVE\nvar onRemove=function onRemove(targetId){dispatch({type:\"REMOVE\",targetId:targetId});};// EDIT\nvar onEdit=function onEdit(targetId,date,content,emotion){dispatch({type:\"EDIT\",data:{id:targetId,date:new Date(date).getTime(),content:content,emotion:emotion}});};return/*#__PURE__*/_jsx(DiaryStateContext.Provider,{value:data,children:/*#__PURE__*/_jsx(DiaryDispatchContext.Provider,{value:{onCreate:onCreate,onEdit:onEdit,onRemove:onRemove},children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/new\",element:/*#__PURE__*/_jsx(New,{})}),/*#__PURE__*/_jsx(Route,{path:\"/edit/:id\",element:/*#__PURE__*/_jsx(Edit,{})}),/*#__PURE__*/_jsx(Route,{path:\"/diary/:id\",element:/*#__PURE__*/_jsx(Diary,{})})]})})})})});}export default App;","map":{"version":3,"names":["React","useReducer","useRef","useEffect","BrowserRouter","Routes","Route","Home","New","Edit","Diary","type","jsx","_jsx","jsxs","_jsxs","reducer","state","action","newState","data","concat","_toConsumableArray","filter","it","id","targetId","map","_objectSpread","localStorage","setItem","JSON","stringify","DiaryStateContext","createContext","DiaryDispatchContext","App","_useReducer","_useReducer2","_slicedToArray","dispatch","localData","getItem","diaryList","parse","sort","a","b","parseInt","length","dataId","current","onCreate","date","content","emotion","Date","getTime","onRemove","onEdit","Provider","value","children","className","path","element"],"sources":["/Users/hwak/Documents/workspace/playground/bite/emotion-diary/src/App.js"],"sourcesContent":["import React,{ useReducer, useRef, useEffect } from \"react\";\n\nimport \"./App.css\";\nimport {BrowserRouter, Routes, Route} from \"react-router-dom\";\n\nimport Home from \"./pages/Home\";\nimport New from \"./pages/New\";\nimport Edit from \"./pages/Edit\";\nimport Diary from \"./pages/Diary\";\nimport { type } from \"@testing-library/user-event/dist/type\";\n\nconst reducer = (state,action) => {\n  let newState = [];\n  switch(action.type) {\n    case 'INIT':{\n      return action.data;\n    }\n    case 'CREATE':{\n      newState = [action.data, ...state];\n      break;\n    }\n    case 'REMOVE':{\n      newState = state.filter((it)=>it.id !== action.targetId);\n      break;\n    }\n    case 'EDIT':{\n      newState = state.map((it)=>it.id === action.data.id? {...action.data}: it);\n      break;\n    }\n    default:\n      return state;\n  }\n\n  localStorage.setItem('diary',JSON.stringify(newState));\n  return newState;\n}\n\nexport const DiaryStateContext = React.createContext();\nexport const DiaryDispatchContext = React.createContext();\n\nfunction App() {\n  const [data,dispatch] = useReducer(reducer,[]);\n\n  useEffect(() => {\n    const localData = localStorage.getItem('diary');\n    if(localData) {\n      const diaryList = JSON.parse(localData).sort((a,b) => parseInt(b.id) - parseInt(a.id));\n\n      if (diaryList.length >= 1) {\n        dataId.current = parseInt(diaryList[0].id) + 1;\n        dispatch({type: \"INIT\", data: diaryList});\n      }\n    }\n  },[]);\n\n  const dataId = useRef(6);\n\n   // CREATE\n  const onCreate = (date,content,emotion)=> {\n    dispatch({type : \"CREATE\",\n      data:{\n        id: dataId.current,\n        date: new Date(date).getTime(),\n        content,\n        emotion,\n      },\n    });\n    dataId.current += 1;\n  };\n\n   // REMOVE\n  const onRemove = (targetId) => {\n    dispatch({type:\"REMOVE\",targetId});\n  };\n  \n   // EDIT\n  const onEdit = (targetId,date,content,emotion)=>{\n    dispatch({\n      type:\"EDIT\",\n      data:{\n        id : targetId,\n        date : new Date(date).getTime(),\n        content,\n        emotion,\n      },\n    });\n  };\n  \n  return (\n    <DiaryStateContext.Provider value={data}>\n      <DiaryDispatchContext.Provider\n        value={{\n          onCreate,\n          onEdit,\n          onRemove\n        }}\n      >\n        <BrowserRouter>\n        <div className=\"App\">\n          <Routes>\n            <Route path=\"/\" element={<Home />} />\n            <Route path=\"/new\" element={<New />} />\n            <Route path=\"/edit/:id\" element={<Edit />} />\n            <Route path=\"/diary/:id\" element={<Diary />} />\n          </Routes>\n        </div>\n      </BrowserRouter>\n    </DiaryDispatchContext.Provider>\n    </DiaryStateContext.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"gcAAA,MAAO,CAAAA,KAAK,EAAGC,UAAU,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAE3D,MAAO,WAAW,CAClB,OAAQC,aAAa,CAAEC,MAAM,CAAEC,KAAK,KAAO,kBAAkB,CAE7D,MAAO,CAAAC,IAAI,KAAM,cAAc,CAC/B,MAAO,CAAAC,GAAG,KAAM,aAAa,CAC7B,MAAO,CAAAC,IAAI,KAAM,cAAc,CAC/B,MAAO,CAAAC,KAAK,KAAM,eAAe,CACjC,OAASC,IAAI,KAAQ,uCAAuC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE7D,GAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAIC,KAAK,CAACC,MAAM,CAAK,CAChC,GAAI,CAAAC,QAAQ,CAAG,EAAE,CACjB,OAAOD,MAAM,CAACP,IAAI,EAChB,IAAK,MAAM,CAAC,CACV,MAAO,CAAAO,MAAM,CAACE,IAAI,CACpB,CACA,IAAK,QAAQ,CAAC,CACZD,QAAQ,EAAID,MAAM,CAACE,IAAI,EAAAC,MAAA,CAAAC,kBAAA,CAAKL,KAAK,EAAC,CAClC,MACF,CACA,IAAK,QAAQ,CAAC,CACZE,QAAQ,CAAGF,KAAK,CAACM,MAAM,CAAC,SAACC,EAAE,QAAG,CAAAA,EAAE,CAACC,EAAE,GAAKP,MAAM,CAACQ,QAAQ,GAAC,CACxD,MACF,CACA,IAAK,MAAM,CAAC,CACVP,QAAQ,CAAGF,KAAK,CAACU,GAAG,CAAC,SAACH,EAAE,QAAG,CAAAA,EAAE,CAACC,EAAE,GAAKP,MAAM,CAACE,IAAI,CAACK,EAAE,CAAAG,aAAA,IAAMV,MAAM,CAACE,IAAI,EAAGI,EAAE,GAAC,CAC1E,MACF,CACA,QACE,MAAO,CAAAP,KAAK,CAChB,CAEAY,YAAY,CAACC,OAAO,CAAC,OAAO,CAACC,IAAI,CAACC,SAAS,CAACb,QAAQ,CAAC,CAAC,CACtD,MAAO,CAAAA,QAAQ,CACjB,CAAC,CAED,MAAO,IAAM,CAAAc,iBAAiB,cAAGjC,KAAK,CAACkC,aAAa,CAAC,CAAC,CACtD,MAAO,IAAM,CAAAC,oBAAoB,cAAGnC,KAAK,CAACkC,aAAa,CAAC,CAAC,CAEzD,QAAS,CAAAE,GAAGA,CAAA,CAAG,CACb,IAAAC,WAAA,CAAwBpC,UAAU,CAACe,OAAO,CAAC,EAAE,CAAC,CAAAsB,YAAA,CAAAC,cAAA,CAAAF,WAAA,IAAvCjB,IAAI,CAAAkB,YAAA,IAACE,QAAQ,CAAAF,YAAA,IAEpBnC,SAAS,CAAC,UAAM,CACd,GAAM,CAAAsC,SAAS,CAAGZ,YAAY,CAACa,OAAO,CAAC,OAAO,CAAC,CAC/C,GAAGD,SAAS,CAAE,CACZ,GAAM,CAAAE,SAAS,CAAGZ,IAAI,CAACa,KAAK,CAACH,SAAS,CAAC,CAACI,IAAI,CAAC,SAACC,CAAC,CAACC,CAAC,QAAK,CAAAC,QAAQ,CAACD,CAAC,CAACtB,EAAE,CAAC,CAAGuB,QAAQ,CAACF,CAAC,CAACrB,EAAE,CAAC,GAAC,CAEtF,GAAIkB,SAAS,CAACM,MAAM,EAAI,CAAC,CAAE,CACzBC,MAAM,CAACC,OAAO,CAAGH,QAAQ,CAACL,SAAS,CAAC,CAAC,CAAC,CAAClB,EAAE,CAAC,CAAG,CAAC,CAC9Ce,QAAQ,CAAC,CAAC7B,IAAI,CAAE,MAAM,CAAES,IAAI,CAAEuB,SAAS,CAAC,CAAC,CAC3C,CACF,CACF,CAAC,CAAC,EAAE,CAAC,CAEL,GAAM,CAAAO,MAAM,CAAGhD,MAAM,CAAC,CAAC,CAAC,CAEvB;AACD,GAAM,CAAAkD,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIC,IAAI,CAACC,OAAO,CAACC,OAAO,CAAI,CACxCf,QAAQ,CAAC,CAAC7B,IAAI,CAAG,QAAQ,CACvBS,IAAI,CAAC,CACHK,EAAE,CAAEyB,MAAM,CAACC,OAAO,CAClBE,IAAI,CAAE,GAAI,CAAAG,IAAI,CAACH,IAAI,CAAC,CAACI,OAAO,CAAC,CAAC,CAC9BH,OAAO,CAAPA,OAAO,CACPC,OAAO,CAAPA,OACF,CACF,CAAC,CAAC,CACFL,MAAM,CAACC,OAAO,EAAI,CAAC,CACrB,CAAC,CAEA;AACD,GAAM,CAAAO,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIhC,QAAQ,CAAK,CAC7Bc,QAAQ,CAAC,CAAC7B,IAAI,CAAC,QAAQ,CAACe,QAAQ,CAARA,QAAQ,CAAC,CAAC,CACpC,CAAC,CAEA;AACD,GAAM,CAAAiC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAIjC,QAAQ,CAAC2B,IAAI,CAACC,OAAO,CAACC,OAAO,CAAG,CAC9Cf,QAAQ,CAAC,CACP7B,IAAI,CAAC,MAAM,CACXS,IAAI,CAAC,CACHK,EAAE,CAAGC,QAAQ,CACb2B,IAAI,CAAG,GAAI,CAAAG,IAAI,CAACH,IAAI,CAAC,CAACI,OAAO,CAAC,CAAC,CAC/BH,OAAO,CAAPA,OAAO,CACPC,OAAO,CAAPA,OACF,CACF,CAAC,CAAC,CACJ,CAAC,CAED,mBACE1C,IAAA,CAACoB,iBAAiB,CAAC2B,QAAQ,EAACC,KAAK,CAAEzC,IAAK,CAAA0C,QAAA,cACtCjD,IAAA,CAACsB,oBAAoB,CAACyB,QAAQ,EAC5BC,KAAK,CAAE,CACLT,QAAQ,CAARA,QAAQ,CACRO,MAAM,CAANA,MAAM,CACND,QAAQ,CAARA,QACF,CAAE,CAAAI,QAAA,cAEFjD,IAAA,CAACT,aAAa,EAAA0D,QAAA,cACdjD,IAAA,QAAKkD,SAAS,CAAC,KAAK,CAAAD,QAAA,cAClB/C,KAAA,CAACV,MAAM,EAAAyD,QAAA,eACLjD,IAAA,CAACP,KAAK,EAAC0D,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEpD,IAAA,CAACN,IAAI,GAAE,CAAE,CAAE,CAAC,cACrCM,IAAA,CAACP,KAAK,EAAC0D,IAAI,CAAC,MAAM,CAACC,OAAO,cAAEpD,IAAA,CAACL,GAAG,GAAE,CAAE,CAAE,CAAC,cACvCK,IAAA,CAACP,KAAK,EAAC0D,IAAI,CAAC,WAAW,CAACC,OAAO,cAAEpD,IAAA,CAACJ,IAAI,GAAE,CAAE,CAAE,CAAC,cAC7CI,IAAA,CAACP,KAAK,EAAC0D,IAAI,CAAC,YAAY,CAACC,OAAO,cAAEpD,IAAA,CAACH,KAAK,GAAE,CAAE,CAAE,CAAC,EACzC,CAAC,CACN,CAAC,CACO,CAAC,CACa,CAAC,CACJ,CAAC,CAEjC,CAEA,cAAe,CAAA0B,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}
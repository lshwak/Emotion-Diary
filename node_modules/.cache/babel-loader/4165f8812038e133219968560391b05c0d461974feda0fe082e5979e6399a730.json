{"ast":null,"code":"import _objectSpread from\"/Users/hwak/Documents/workspace/playground/bite/emotion-diary/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/hwak/Documents/workspace/playground/bite/emotion-diary/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useRef,useContext,useEffect,useCallback}from'react';import{useNavigate}from'react-router-dom';import{DiaryDispatchContext}from'./../App.js';import MyHeader from'./MyHeader';import MyButton from'./MyButton';import EmotionItem from'./EmotionItem';import{getStringDate}from'../utill/Date.js';import{emotionList}from'../utill/emotion.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DiaryEditor=function DiaryEditor(_ref){var isEdit=_ref.isEdit,originData=_ref.originData;var contentRef=useRef();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),content=_useState2[0],setContent=_useState2[1];var _useState3=useState(3),_useState4=_slicedToArray(_useState3,2),emotion=_useState4[0],setEmotion=_useState4[1];var _useState5=useState(getStringDate(new Date())),_useState6=_slicedToArray(_useState5,2),date=_useState6[0],setDate=_useState6[1];var _useContext=useContext(DiaryDispatchContext),onCreate=_useContext.onCreate,onEdit=_useContext.onEdit,onRemove=_useContext.onRemove;var handleClickEmote=useCallback(function(emotion){setEmotion(emotion);},[]);var navigate=useNavigate();var handleSubmit=function handleSubmit(){if(content.length<1){contentRef.current.focus();return;}if(window.confirm(isEdit?\"일기를 수정하시겠습니까?\":\"새로운 일기를 작성하시겠습니까?\")){if(!isEdit){onCreate(date,content,emotion);}else{onEdit(originData.id,date,content,emotion);}}navigate('/',{replace:true});};var handleRemove=function handleRemove(){if(window.confirm('정말 삭제하시겠습니까?')){onRemove(originData.id);navigate('/',{replace:true});}};useEffect(function(){if(isEdit){setDate(getStringDate(new Date(parseInt(originData.date))));setEmotion(originData.emotion);setContent(originData.content);}},[isEdit,originData]);return/*#__PURE__*/_jsxs(\"div\",{className:\"DiaryEditor\",children:[/*#__PURE__*/_jsx(MyHeader,{headText:isEdit?\"일기 수정하기\":\"새 일기쓰기\",leftChild:/*#__PURE__*/_jsx(MyButton,{text:\"< 뒤로가기\",onClick:function onClick(){return navigate(-1);}}),rightChild:/*#__PURE__*/_jsx(MyButton,{text:\"삭제하기\",type:\"negative\",onClick:handleRemove})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uC624\\uB298\\uC740 \\uC5B8\\uC81C\\uC778\\uAC00\\uC694?\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input_box\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input_date\",value:date,onChange:function onChange(e){return setDate(e.target.value);},type:\"date\"})})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uC624\\uB298\\uC758 \\uAC10\\uC815\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input_box emotion_list_wrapper\",children:emotionList.map(function(it){return/*#__PURE__*/_jsx(EmotionItem,_objectSpread(_objectSpread({},it),{},{onClick:handleClickEmote,isSeleted:it.emotion_id===emotion}),it.emotion_id);})})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uC624\\uB298\\uC758 \\uC77C\\uAE30\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input_box text_wrapper\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\uC624\\uB298\\uC744 \\uC5B4\\uB560\\uB098\\uC694?\",ref:contentRef,value:content,onChange:function onChange(e){return setContent(e.target.value);}})})]}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"control_box\",children:[/*#__PURE__*/_jsx(MyButton,{text:\"취소하기\",onClick:function onClick(e){return navigate(-1);}}),/*#__PURE__*/_jsx(MyButton,{text:\"작성완료\",type:\"positive\",onClick:handleSubmit})]})})]})]});};export default DiaryEditor;","map":{"version":3,"names":["useState","useRef","useContext","useEffect","useCallback","useNavigate","DiaryDispatchContext","MyHeader","MyButton","EmotionItem","getStringDate","emotionList","jsx","_jsx","jsxs","_jsxs","DiaryEditor","_ref","isEdit","originData","contentRef","_useState","_useState2","_slicedToArray","content","setContent","_useState3","_useState4","emotion","setEmotion","_useState5","Date","_useState6","date","setDate","_useContext","onCreate","onEdit","onRemove","handleClickEmote","navigate","handleSubmit","length","current","focus","window","confirm","id","replace","handleRemove","parseInt","className","children","headText","leftChild","text","onClick","rightChild","type","value","onChange","e","target","map","it","_objectSpread","isSeleted","emotion_id","placeholder","ref"],"sources":["/Users/hwak/Documents/workspace/playground/bite/emotion-diary/src/components/DiaryEditor.js"],"sourcesContent":["import { useState, useRef, useContext, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { DiaryDispatchContext } from './../App.js';\n\nimport MyHeader from './MyHeader';\nimport MyButton from './MyButton';\nimport EmotionItem from './EmotionItem';\n\nimport { getStringDate } from '../utill/Date.js';\nimport { emotionList } from '../utill/emotion.js';\n\nconst DiaryEditor = ({isEdit, originData}) => {\n    const contentRef = useRef();\n    const [content, setContent] = useState(\"\");\n    const [emotion, setEmotion] = useState(3);\n    const [date, setDate] = useState(getStringDate(new Date()));\n\n    const {onCreate, onEdit, onRemove} = useContext(DiaryDispatchContext);\n\n    const handleClickEmote = useCallback((emotion) => {\n        setEmotion(emotion);\n    },[]);\n\n    const navigate = useNavigate();\n\n    const handleSubmit = () => {\n        if (content.length < 1) {\n            contentRef.current.focus();\n            return;\n        }\n\n        if(window.confirm(isEdit ? \"일기를 수정하시겠습니까?\" : \"새로운 일기를 작성하시겠습니까?\")) {\n            if(!isEdit) {\n                onCreate(date, content, emotion);\n            } else {\n                onEdit(originData.id, date, content, emotion);\n            }\n        }\n\n        navigate('/', { replace: true });\n    };\n\n    const handleRemove = () => {\n        if(window.confirm('정말 삭제하시겠습니까?')){\n            onRemove(originData.id);\n            navigate('/',{replace:true});\n        }\n    }\n\n    useEffect(() => {\n        if (isEdit) {\n            setDate(getStringDate(new Date(parseInt(originData.date))));\n            setEmotion(originData.emotion);\n            setContent(originData.content);\n        }\n    }, [isEdit, originData]);\n\n    return (\n        <div className='DiaryEditor'>\n            <MyHeader \n                headText={isEdit ? \"일기 수정하기\" : \"새 일기쓰기\"}\n                leftChild={<MyButton text={\"< 뒤로가기\"} onClick={()=> navigate(-1)} />}\n                rightChild={ <MyButton text={\"삭제하기\"} type={\"negative\"} onClick={handleRemove} />}\n            />\n            <div>\n                <section>\n                    <h4>오늘은 언제인가요?</h4>\n                    <div className=\"input_box\">\n                        <input className='input_date' value={date} onChange={(e) => setDate(e.target.value)} type=\"date\" />\n                    </div>\n                </section>\n                <section>\n                    <h4>오늘의 감정</h4>\n                    <div className='input_box emotion_list_wrapper'>\n                        {emotionList.map((it) => (\n                            <EmotionItem key={it.emotion_id} {...it} onClick={handleClickEmote} isSeleted={it.emotion_id === emotion} />\n                        ))}\n                    </div>\n                </section>\n                <section>\n                    <h4>오늘의 일기</h4>\n                    <div className='input_box text_wrapper'>\n                        <textarea\n                            placeholder='오늘을 어땠나요?'\n                            ref={contentRef}\n                            value={content}\n                            onChange={(e) => setContent(e.target.value)}\n                        />\n                    </div>\n                </section>\n                <section>\n                    <div className='control_box'>\n                        <MyButton text={\"취소하기\"} onClick={(e)=> navigate(-1)} />\n                        <MyButton text={\"작성완료\"} type={\"positive\"} onClick={handleSubmit} />\n                    </div>\n                </section>\n            </div>\n        </div>\n    );\n}\n\nexport default DiaryEditor;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}